<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Registro del Monitoreo ¬∑ M3</title>

  <!-- Material Symbols (opcional, para iconos si luego los usas) -->
  <link rel="stylesheet"
        href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined"
  />

  <!-- Estilos propios -->
  <link rel="stylesheet" href="css/registro.css" />
</head>
<body class="md3-body">
  <div class="shell">
    <header class="header-bar md3-surface">
      <div class="header-left">
        <h1 class="app-title">Registro del Monitoreo</h1>
        <div class="subtitle">
          Supervisor ¬∑ Versi√≥n PREMIUM con c√°lculo autom√°tico de nota
        </div>
      </div>
      <div class="header-right">
        <label class="field-label">Registrado por</label>
        <select id="registradoPor" class="md3-field">
          <option value="">Selecciona...</option>
          <option value="Alex Paolo Nu√±ez Sulca - L√≠der de Calidad y Formaci√≥n">
            Alex Paolo Nu√±ez Sulca - L√≠der de Calidad y Formaci√≥n
          </option>
          <option value="C√©sar Alonso Torres Montes - Supervisor">
            C√©sar Alonso Torres Montes - Supervisor
          </option>
          <option value="Karen Vanessa Vital Cordova - L√≠der de Operaciones">
            Karen Vanessa Vital Cordova - L√≠der de Operaciones
          </option>
        </select>
        <div class="tag md3-chip">
          Firestore + Storage ¬∑ v3 ¬∑ M3
        </div>
      </div>
    </header>

    <main class="layout">
      <!-- COLUMNA IZQUIERDA: FORMULARIO -->
      <section class="card md3-surface">
        <h2 class="section-title">Datos del monitoreo</h2>

        <div class="row">
          <div class="col">
            <label for="idLlamada" class="field-label">ID LLAMADA</label>
            <input id="idLlamada" class="md3-field" placeholder="Ej: intefectiva_123" />
          </div>
          <div class="col">
            <label for="idContacto" class="field-label">ID CONTACTO</label>
            <input id="idContacto" class="md3-field" placeholder="Ej: contacto_456" />
          </div>
        </div>

        <label for="tipoDetectado" class="field-label">Tipo detectado</label>
        <input id="tipoDetectado" class="md3-field" readonly />

        <div class="row margin-top-6">
          <div class="col">
            <label for="asesor" class="field-label">Asesor</label>
            <select id="asesor" class="md3-field"></select>
            <small class="small">
              * Cargado desde colecci√≥n <b>asesores</b> (nombre + GC)
            </small>
          </div>
          <div class="col col-small">
            <label for="cargo" class="field-label">Cargo</label>
            <select id="cargo" class="md3-field">
              <option>ASESOR INBOUND</option>
              <option>ASESOR CORREOS</option>
              <option>ASESOR REDES</option>
            </select>
          </div>
        </div>

        <h3 class="section-subtitle">Datos del cliente</h3>
        <div class="row">
          <div class="col">
            <label for="cliDni" class="field-label">DNI cliente</label>
            <input id="cliDni" class="md3-field" />
          </div>
          <div class="col">
            <label for="cliNombre" class="field-label">Nombre cliente</label>
            <input id="cliNombre" class="md3-field" />
          </div>
          <div class="col">
            <label for="cliTel" class="field-label">Tel√©fono</label>
            <input id="cliTel" class="md3-field" />
          </div>
        </div>

        <label for="cliTipif" class="field-label">Tipificaci√≥n</label>
        <input id="cliTipif" class="md3-field" />

        <label for="cliObs" class="field-label">Observaciones Tipificaci√≥n</label>
        <textarea id="cliObs" class="md3-field md3-textarea"
                  placeholder="27/11/2025 Usuario gescob - consulta de ejemplo - soluci√≥n de ejemplo"></textarea>

        <label for="resumen" class="field-label">Resumen de la llamada</label>
        <textarea id="resumen" class="md3-field md3-textarea" rows="4"
                  placeholder="Describe brevemente la gesti√≥n realizada por el asesor."></textarea>

        <h3 class="section-subtitle">√çtems observados</h3>
        <div class="small">
          Marca los √≠tems en los que el asesor falla y describe el contexto en el detalle.
          Recuerda: s√≥lo se registran incumplimientos (no aciertos).
        </div>

        <div class="chips-row">
          <span class="chip chip-error">ERROR INEXCUSABLE ‚áí nota 0</span>
          <span class="chip">PENCUF ‚áí resta hasta 25 pts seg√∫n %</span>
          <span class="chip">PECNEG ‚áí -30 pts fijo</span>
          <span class="chip">PECUF ‚áí -35 pts fijo</span>
          <span class="chip">PECCUMP ‚áí -10 pts fijo</span>
        </div>

        <div class="actions-row">
          <button id="btnAddItem" class="btn small" type="button">
            + Agregar √≠tem
          </button>
          <button id="btnClearItems" class="btn ghost small" type="button">
            Limpiar √≠tems
          </button>
        </div>

        <div id="itemsContainer" class="items-list"></div>

        <label for="imgs" class="field-label margin-top-12">
          Adjuntar im√°genes (evidencias)
        </label>
        <input id="imgs" type="file" multiple accept="image/*" class="md3-field" />
        <div id="imgPreview" class="img-preview-row"></div>

        <button id="btnSubmit" class="btn full" type="button">
          Registrar monitoreo
        </button>
        <div id="msg" class="msg-status"></div>
      </section>

      <!-- COLUMNA DERECHA: RESUMEN / NOTA -->
      <aside class="card md3-surface">
        <div class="summary-title">Resumen de nota</div>
        <div id="scoreCircle" class="score-circle">
          <span id="notaPreview">100</span>%
        </div>

        <div class="summary-row">
          <span>Clasificaci√≥n</span>
          <span id="badgeCalidad" class="badge good">üü¢ Aprobado</span>
        </div>
        <div class="summary-row">
          <span>PENCUF</span>
          <span id="infoPENCUF" class="small">Sin descuentos</span>
        </div>
        <div class="summary-row">
          <span>PECNEG</span>
          <span id="infoPECNEG" class="small">Sin descuentos</span>
        </div>
        <div class="summary-row">
          <span>PECUF</span>
          <span id="infoPECUF" class="small">Sin descuentos</span>
        </div>
        <div class="summary-row">
          <span>PECCUMP</span>
          <span id="infoPECCUMP" class="small">Sin descuentos</span>
        </div>
        <div class="summary-row">
          <span>ERROR INEXCUSABLE</span>
          <span id="infoEI" class="small">No aplicado</span>
        </div>

        <hr class="divider" />

        <div class="small">
          La nota se recalcula autom√°ticamente seg√∫n los √≠tems marcados.<br />
          <b>Regla:</b> si hay <b>ERROR INEXCUSABLE</b> la nota es siempre <b>0</b>.
        </div>
      </aside>
    </main>
  </div>

  <!-- L√≥gica JS (M√≥dulo ES) -->
  <script type="module" src="js/registro.js"></script>
</body>
</html>
