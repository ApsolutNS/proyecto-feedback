<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Dashboard - Supervisi√≥n</title>

  <!-- Chart.js -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

  <!-- CSS -->
  <link rel="stylesheet" href="css/index.css" />
</head>

<body>
<!-- ================= HEADER ================= -->
<header>
  <div>
    <h1>Panel Principal - Calidad & Monitoreo</h1>
    <small>Vista ejecutiva por canal</small>
  </div>
  <div class="header-right">
    <span class="header-user">
      Usuario: <strong id="userRoleName">Cargando...</strong>
    </span>
    <button id="btnAdmin" class="btn btn-admin">Administraci√≥n</button>
    <button id="btnTheme" class="btn btn-toggle">‚òÄÔ∏è Modo claro</button>
    <button id="btnLogout" class="btn btn-logout">Cerrar sesi√≥n</button>
  </div>
</header>

<!-- ================= CONTENEDOR ================= -->
<div class="container">

  <!-- ============ ASIDE IZQUIERDO ============ -->
  <aside class="left">
    <div class="card">
      <h3>Accesos r√°pidos</h3>

      <!-- Internos -->
      <button class="btn primary" data-external="registro.html">1 ¬∑ Registro</button>
      <button class="btn secondary" data-external="portal_agente.html">2 ¬∑ Portal del Agente</button>
      <button class="btn secondary" data-external="visualizacion_feedback.html">3 ¬∑ Visualizaci√≥n Feedback</button>
      <button class="btn secondary" data-external="refuerzos.html">4 ¬∑ Refuerzos Calidad</button>

      <!-- Externos -->
      <button class="btn secondary" data-external="https://monumental-caramel-7369de.netlify.app/">
        5 ¬∑ Registro de Observaciones
      </button>
      <button class="btn secondary" data-external="https://efectivasa.sharepoint.com/:x:/r/sites/GrupoEFE-EfeCinco/Documentos%20compartidos/Calidad%20y%20Formaci%C3%B3n/Calidad/Reportes%20de%20Calidad/Reporte%20Monitoreo%20Gescob%20-%202025.xlsx?d=w2a4a6217a8e9491286f3370bb45370b0&csf=1&web=1&e=Nz9i8S">
        6 ¬∑ Reporte de monitoreos
      </button>
      <button class="btn secondary" data-external="https://docs.google.com/forms/d/e/1FAIpQLSc8s049gfvA-O5nWzlDhIlymceNUnIK-rndWV5aSvhwuDf4TA/viewform">
        7 ¬∑ Ficha de errores
      </button>
      <button class="btn secondary" data-external="https://efectivasa.sharepoint.com/:b:/r/sites/GrupoEFE-EfeCinco/Documentos%20compartidos/Calidad%20y%20Formaci%C3%B3n/Calidad/Manual%20de%20Monitoreo/Manual%20de%20Monitoreo%20v4.pdf?csf=1&web=1&e=TzUBCE">
        8 ¬∑ Manual de calidad
      </button>
      <button class="btn secondary" data-external="https://forms.office.com/pages/responsepage.aspx?id=oDcMYc1HMUWfNe-1_TKkEHpWkDIqnlRLmHYcuGRm7NFUM0wxTzg4R0FSMTBSWDlZUzNBUlNQUUIwUi4u">
        9 ¬∑ Registro de feedback
      </button>
    </div>

    <div class="card">
      <h3>Tipo de monitoreo</h3>
      <p class="small"><b>EFECTIVA:</b> <span id="cntEfectiva">0</span></p>
      <p class="small"><b>EFECTIVANK:</b> <span id="cntEfectivank">0</span></p>
      <p class="small"><b>XPERTO:</b> <span id="cntXperto">0</span></p>
      <p class="small"><b>FACEBOOK:</b> <span id="cntFb">0</span></p>
      <p class="small"><b>INSTAGRAM:</b> <span id="cntIg">0</span></p>
      <p class="small"><b>CORREO:</b> <span id="cntMail">0</span></p>
    </div>
  </aside>

  <!-- ================= MAIN ================= -->
  <main>

    <!-- ===== SELECTOR DE CANAL ===== -->
    <div class="card">
      <h3>Canal de atenci√≥n</h3>
      <div class="filters-row">
        <button class="btn secondary" data-nav="index.html?view=inbound">Inbound</button>
        <button class="btn secondary" data-nav="index.html?view=redes">Redes</button>
        <button class="btn secondary" data-nav="index.html?view=correos">Correos</button>
      </div>
    </div>

    <!-- ===== FILTROS GLOBALES ===== -->
    <div class="card">
      <h3>Filtros globales</h3>
      <div class="filters-row">
        <label>Mes:</label>
        <select id="filterMes">
          <option value="">Todos</option>
          <option value="0">Enero</option>
          <option value="1">Febrero</option>
          <option value="2">Marzo</option>
          <option value="3">Abril</option>
          <option value="4">Mayo</option>
          <option value="5">Junio</option>
          <option value="6">Julio</option>
          <option value="7">Agosto</option>
          <option value="8">Septiembre</option>
          <option value="9">Octubre</option>
          <option value="10">Noviembre</option>
          <option value="11">Diciembre</option>
        </select>

        <label>A√±o:</label>
        <select id="filterAnio"></select>

        <label>Semana:</label>
        <select id="filterSemana"></select>

       <label for="filterRegistrado">Registrado por:</label>
          <label>Registrado por:</label>
          <select id="filterRegistrado">
            <option value="">Todos</option>
          </select>

        <span class="small" id="filterSummary"></span>
      </div>
    </div>

    <!-- ===== VISTA EJECUTIVA ===== -->
    <div class="card">
      <h3>Vista ejecutiva por asesor</h3>
      <div id="execGrid" class="exec-grid"></div>
    </div>

    <!-- ===== RANKING √çTEMS ===== -->
    <div class="card">
      <h3>Ranking de √≠tems debitados</h3>
      <button id="btnOpenItemsModal" class="btn secondary">
        üìä Ver ranking general
      </button>
    </div>

    <!-- ===== GR√ÅFICO ===== -->
    <div class="card">
      <h3>Promedio semanal</h3>
      <canvas id="chartMonth"></canvas>
    </div>

    <!-- ===== TABLA SEMANAL ===== -->
    <div class="card">
      <h3>Tabla semanal</h3>
      <div class="weekly">
        <table>
          <thead id="weeklyHead"></thead>
          <tbody id="weeklyBody"></tbody>
        </table>
      </div>
    </div>

    <!-- ===== √öLTIMOS REGISTROS ===== -->
    <div class="card">
      <h3>√öltimos registros</h3>
      <table id="recentTable">
        <thead>
          <tr>
            <th>Fecha</th>
            <th>Asesor</th>
            <th>Nota</th>
            <th>Tipo</th>
            <th>Registrado por</th>
          </tr>
        </thead>
        <tbody></tbody>
      </table>
    </div>
  </main>
</div>

<!-- ================= MODAL RANKING ================= -->
<div id="itemsModal" class="modal-backdrop">
  <div class="modal-content">
    <div class="modal-header">
      <div>
        <h3 id="itemsModalTitle">√çtems debitados</h3>
        <p id="itemsModalSubtitle" class="small"></p>
      </div>
      <button id="btnCloseItemsModal" class="modal-close">‚úï</button>
    </div>
    <div class="modal-body">
      <table class="modal-table">
        <thead>
          <tr>
            <th>√çtem</th>
            <th>Tipo</th>
            <th>Cantidad</th>
            <th>% D√©bito</th>
            <th>% del Total</th>
            <th>Motivo</th>
          </tr>
        </thead>
        <tbody id="itemsTableBody"></tbody>
      </table>
    </div>
  </div>
</div>

<!-- ================= MODAL DETALLE (POPUP) ================= -->
<div id="detailModal" class="modal-backdrop">
  <div class="modal-content">
    <div class="modal-header">
      <div>
        <h3 id="detailModalTitle">Detalle del √≠tem</h3>
        <p id="detailModalSubtitle" class="small"></p>
      </div>
      <button id="btnCloseDetail" class="modal-close">‚Üê Volver</button>
    </div>
    <div class="modal-body" id="detailModalBody"></div>
  </div>
</div>

<!-- ================= JS ================= -->
<script type="module" src="js/index.js"></script>
</body>
</html>





