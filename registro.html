<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Registro del Monitoreo</title>

  <!-- Material Symbols (√≠conos Google) -->
  <link rel="stylesheet"
        href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:wght@400;500;600&display=swap" />

  <!-- Fuente base -->
  <link rel="stylesheet"
        href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" />

  <link rel="stylesheet" href="css/registro.css" />
</head>
<body class="md-body">
  <div class="md-app">
    <!-- TOP APP BAR -->
    <header class="md-topbar">
      <div class="md-topbar-left">
        <span class="material-symbols-outlined md-topbar-icon">fact_check</span>
        <div>
          <div class="md-topbar-title">Registro del Monitoreo</div>
          <div class="md-topbar-subtitle">Supervisor ¬∑ Versi√≥n M3 con nota autom√°tica</div>
        </div>
      </div>
      <div class="md-topbar-right">
        <div class="md-chip md-chip-tonal" id="userChip">
          <span class="material-symbols-outlined md-chip-icon">supervisor_account</span>
          <span id="userEmailLabel">Cargando usuario...</span>
        </div>
        <div class="md-chip md-chip-outline">
          <span class="material-symbols-outlined md-chip-icon">database</span>
          <span>Firestore + Storage ¬∑ v3 UID</span>
        </div>
      </div>
    </header>

    <main class="md-layout">
      <!-- COLUMNA IZQUIERDA -->
      <section class="md-card md-card-main">
        <h2 class="md-card-title">Datos del monitoreo</h2>

        <div class="md-grid md-grid-2">
          <div class="md-field">
            <label for="idLlamada" class="md-label">ID llamada</label>
            <div class="md-input-wrapper">
              <input id="idLlamada" autocomplete="off" />
            </div>
          </div>
          <div class="md-field">
            <label for="idContacto" class="md-label">ID contacto</label>
            <div class="md-input-wrapper">
              <input id="idContacto" autocomplete="off" />
            </div>
          </div>
        </div>

        <div class="md-grid md-grid-2">
          <div class="md-field">
            <label class="md-label">Tipo detectado</label>
            <div class="md-input-wrapper md-input-readonly">
              <input id="tipoDetectado" readonly />
              <span class="material-symbols-outlined md-input-trailing">auto_awesome</span>
            </div>
          </div>
          <div class="md-field">
            <label for="registradoPor" class="md-label">Registrado por</label>
            <div class="md-input-wrapper">
              <select id="registradoPor">
                <option value="">Selecciona...</option>
                <option value="Alex Paolo Nu√±ez Sulca - L√≠der de Calidad y Formaci√≥n">
                  Alex Paolo Nu√±ez Sulca - L√≠der de Calidad y Formaci√≥n
                </option>
                <option value="C√©sar Alonso Torres Montes - Supervisor">
                  C√©sar Alonso Torres Montes - Supervisor
                </option>
                <option value="Karen Vanessa Vital Cordova - L√≠der de Operaciones">
                  Karen Vanessa Vital Cordova - L√≠der de Operaciones
                </option>
              </select>
              <span class="material-symbols-outlined md-input-trailing">person_edit</span>
            </div>
          </div>
        </div>

        <div class="md-grid md-grid-2">
          <div class="md-field">
            <label class="md-label">Asesor monitoreado</label>
            <div class="md-input-wrapper">
              <select id="asesor"></select>
              <span class="material-symbols-outlined md-input-trailing">group</span>
            </div>
            <div class="md-helper">Cargado desde colecci√≥n <strong>asesores</strong> (UID real + GC).</div>
          </div>
          <div class="md-field">
            <label for="cargo" class="md-label">Cargo</label>
            <div class="md-input-wrapper">
              <select id="cargo">
                <option>ASESOR INBOUND</option>
                <option>ASESOR CORREOS</option>
                <option>ASESOR REDES</option>
              </select>
              <span class="material-symbols-outlined md-input-trailing">badge</span>
            </div>
          </div>
        </div>

        <h3 class="md-section-title">Datos del cliente</h3>
        <div class="md-grid md-grid-3">
          <div class="md-field">
            <label for="cliDni" class="md-label">DNI</label>
            <div class="md-input-wrapper">
              <input id="cliDni" autocomplete="off" />
            </div>
          </div>
          <div class="md-field">
            <label for="cliNombre" class="md-label">Nombre</label>
            <div class="md-input-wrapper">
              <input id="cliNombre" autocomplete="off" />
            </div>
          </div>
          <div class="md-field">
            <label for="cliTel" class="md-label">Tel√©fono</label>
            <div class="md-input-wrapper">
              <input id="cliTel" autocomplete="off" />
            </div>
          </div>
        </div>

        <div class="md-field">
          <label for="cliTipif" class="md-label">Tipificaci√≥n</label>
          <div class="md-input-wrapper">
            <input id="cliTipif" autocomplete="off" />
          </div>
        </div>

        <div class="md-field">
          <label for="cliObs" class="md-label">Observaciones de tipificaci√≥n</label>
          <div class="md-input-wrapper">
            <textarea id="cliObs" rows="2"
              placeholder="Ej: 27/11/2025 Usuario gescob ¬∑ consulta de ejemplo ¬∑ soluci√≥n de ejemplo"></textarea>
          </div>
        </div>

        <div class="md-field">
          <label for="resumen" class="md-label">Resumen de la llamada</label>
          <div class="md-input-wrapper">
            <textarea id="resumen" rows="3"
              placeholder="Describe brevemente la gesti√≥n realizada por el asesor."></textarea>
          </div>
        </div>

        <h3 class="md-section-title">√çtems observados</h3>
        <p class="md-helper">
          Marca solo los √≠tems donde el asesor <strong>incumple</strong>. El sistema aplicar√° las penalizaciones
          autom√°ticamente.
        </p>

        <div class="md-chips-row">
          <span class="md-chip md-chip-error">ERROR INEXCUSABLE ‚áí nota 0</span>
          <span class="md-chip">PENCUF ‚áí resta hasta 25 pts</span>
          <span class="md-chip">PECNEG ‚áí -30 pts</span>
          <span class="md-chip">PECUF ‚áí -35 pts</span>
          <span class="md-chip">PECCUMP ‚áí -10 pts</span>
        </div>

        <div class="md-actions-row">
          <button id="btnAddItem" class="md-btn md-btn-tonal" type="button">
            <span class="material-symbols-outlined md-btn-icon">add</span>
            Agregar √≠tem
          </button>
          <button id="btnClearItems" class="md-btn md-btn-text" type="button">
            Limpiar √≠tems
          </button>
        </div>

        <div id="itemsContainer" class="items-list"></div>

        <div class="md-field md-field-margin-top">
          <label class="md-label">Evidencias (im√°genes)</label>
          <div class="md-input-wrapper">
            <input id="imgs" type="file" multiple accept="image/*" />
          </div>
          <div id="imgPreview" class="img-preview-row"></div>
        </div>

        <button id="btnSubmit" class="md-btn md-btn-filled md-btn-full" type="button">
          <span class="material-symbols-outlined md-btn-icon">save</span>
          Registrar monitoreo
        </button>

        <p id="msg" class="md-message"></p>
      </section>

      <!-- COLUMNA DERECHA - RESUMEN -->
      <aside class="md-card md-card-summary">
        <h2 class="md-card-title">Resumen de nota</h2>

        <div id="scoreCircle" class="score-circle">
          <span id="notaPreview">100</span><span class="score-symbol">%</span>
        </div>

        <div class="summary-row">
          <span>Clasificaci√≥n</span>
          <span id="badgeCalidad" class="md-badge md-badge-good">üü¢ Aprobado</span>
        </div>
        <div class="summary-row">
          <span>PENCUF</span>
          <span id="infoPENCUF" class="summary-meta">Sin descuentos</span>
        </div>
        <div class="summary-row">
          <span>PECNEG</span>
          <span id="infoPECNEG" class="summary-meta">Sin descuentos</span>
        </div>
        <div class="summary-row">
          <span>PECUF</span>
          <span id="infoPECUF" class="summary-meta">Sin descuentos</span>
        </div>
        <div class="summary-row">
          <span>PECCUMP</span>
          <span id="infoPECCUMP" class="summary-meta">Sin descuentos</span>
        </div>
        <div class="summary-row">
          <span>Error inexcusable</span>
          <span id="infoEI" class="summary-meta">No aplicado</span>
        </div>

        <hr class="md-divider" />

        <p class="md-helper">
          La nota se recalcula autom√°ticamente seg√∫n los √≠tems seleccionados.<br />
          Si existe <strong>Error inexcusable</strong>, la nota ser√° siempre <strong>0</strong>.
        </p>
      </aside>
    </main>
  </div>

  <script type="module" src="js/registro.js"></script>
</body>
</html>

