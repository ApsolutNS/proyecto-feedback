<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Administrador del Sistema</title>
  <link rel="stylesheet" href="css/admin.css">
</head>
<body>
  <!-- ğŸ”µ NAVBAR -->
  <nav class="navbar">
    <div class="nav-left">
      <span class="logo">âš™ï¸ Admin</span>
    </div>
    <div class="nav-right">
      <a href="index.html" class="nav-btn">ğŸ  Ir al Dashboard</a>
      <button class="nav-btn red" id="btnLogout">Cerrar sesiÃ³n</button>
    </div>
  </nav>

  <div class="container">
    <h1>Panel Administrador</h1>
    <p>Crear usuarios, registradores y administrar accesos</p>

    <div class="admin-grid">
      <!-- =======================
           CARD: CREAR USUARIO
      ======================== -->
      <div class="admin-col">
      <div class="card">
        <h3>Crear nuevo usuario</h3>

        <label>Email:</label>
        <input id="email" type="email" placeholder="correo@dominio.com">

        <label>ContraseÃ±a:</label>
        <input id="password" type="password" placeholder="********">

        <label>Rol:</label>
        <select id="rol">
          <option value="admin">Administrador</option>
          <option value="supervisor">Supervisor</option>
          <option value="agente">Agente</option>
        </select>

        <!-- SOLO AGENTE -->
        <div data-only-agent="1">
          <label>nombreAsesor:</label>
          <input id="nombreAsesor" type="text" placeholder="Nombre Apellido">

          <label>Cargo (Agente):</label>
          <select id="cargo"></select>

          <label>GC (opcional):</label>
          <input id="GC" type="text" placeholder="GC o DNI">
        </div>

        <button id="btnCrear">Crear usuario</button>
        <p id="msg"></p>
      </div>
      <!-- =======================
           CARD: USUARIOS EXISTENTES
      ======================== -->
      <div class="card">
        <h3>Usuarios existentes</h3>

        <div class="row">
          <input id="userSearch" type="text" placeholder="Buscar por email / nombre / rol...">
          <button class="btn-mini" id="btnRefreshUsers" type="button">Actualizar</button>
        </div>

        <div id="usersInfo" class="small" style="margin-top:10px;"></div>
        <div id="usersList" class="users-list">
          <div class="small">Cargando usuarios...</div>
        </div>

        <p class="small" style="margin-top:10px;color:var(--muted)">
          Nota: â€œEliminarâ€ aquÃ­ borra el perfil en Firestore (colecciÃ³n <b>usuarios</b>).
          El usuario de Authentication solo se elimina con Admin SDK/Cloud Function.
        </p>
      </div>
    </div>
      </div>

    <!-- =======================
         CARD: REGISTRADORES
    ======================== -->
    <div class="admin-col">
    <div class="card">
      <h3>Registradores</h3>

      <label>Nombre:</label>
      <input id="regNombre" placeholder="Ej: Alex Paolo NuÃ±ez Sulca">

      <label>Cargo:</label>
      <select id="regCargo"></select>

      <button id="btnCrearRegistrador" type="button">Agregar registrador</button>
      <p id="regMsg"></p>

      <ul id="listaRegistradores" class="reg-list"></ul>
    </div>
  </div>
  </div>
   <!-- FULL WIDTH -->
  <div class="card users-section">
    <!-- Usuarios existentes -->
  </div>

</div>
<!-- Modal ConfirmaciÃ³n -->
<div id="confirmModal" class="modal-confirm">
  <div class="modal-box">
    <h3>Â¿EstÃ¡s seguro?</h3>
    <p>Esta acciÃ³n no se puede deshacer.</p>
    <div class="modal-actions">
      <button class="btn-cancel" id="btnCancelConfirm">Cancelar</button>
      <button class="btn-confirm" id="btnConfirmAction">Eliminar</button>
    </div>
  </div>
</div>

  <script type="module" src="js/admin.js"></script>
</body>
</html>
