<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Visualización de Feedback — M3</title>

  <!-- Estilos M3 -->
  <link rel="stylesheet" href="css/visualizacion_feedback.css" />

  <!-- jsPDF + html2canvas (sin .map para evitar CSP) -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js?no-map"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js?no-map"></script>
</head>
<body>
  <div class="m3-card main-container">
    <h1 class="m3-title">Visualización de Feedback</h1>

    <!-- FILTROS -->
    <section class="m3-section">
      <label class="m3-label" for="filtroAsesor">Filtrar por asesor</label>
      <select id="filtroAsesor" class="m3-select">
        <option value="">— Selecciona un asesor —</option>
      </select>

      <label class="m3-label" for="filtroRegistrado">Filtrar por quién registró</label>
      <select id="filtroRegistrado" class="m3-select">
        <option value="">— Todos —</option>
        <option value="Alex Paolo Nuñez Sulca - Líder de Calidad y Formación">
          Alex Paolo Nuñez Sulca - Líder de Calidad y Formación
        </option>
        <option value="César Alonso Torres Montes - Supervisor">
          César Alonso Torres Montes - Supervisor
        </option>
        <option value="Karen Vanessa Vital Cordova - Líder de Operaciones">
          Karen Vanessa Vital Cordova - Líder de Operaciones
        </option>
      </select>
    </section>

    <!-- TABLA -->
    <section class="m3-section">
      <table id="tablaFeedback" class="m3-table" style="display:none">
        <thead>
          <tr>
            <th>ID</th>
            <th>Fecha</th>
            <th>Nota</th>
            <th>Estado</th>
            <th>Registrado por</th>
            <th>Acción</th>
          </tr>
        </thead>
        <tbody></tbody>
      </table>

      <div id="tablaVaciaMsg" class="m3-empty-state" style="display:none">
        No hay registros para este filtro.
      </div>
    </section>

    <!-- DETALLE -->
    <section id="detailBox" class="m3-detail-card" style="display:none">
      <header class="detail-header">
        <div>
          <h2 id="tituloRetro" class="detail-title">RETROALIMENTACIÓN</h2>
          <p id="subTituloEstado" class="detail-subtitle"></p>
        </div>
        <img
          class="logo"
          src="https://firebasestorage.googleapis.com/v0/b/feedback-app-ac30e.firebasestorage.app/o/firmas%2FImagen1.png?alt=media"
          alt="Logo"
        />
      </header>

      <div id="detailContent"></div>

      <div class="detail-actions">
        <button id="pdfBtn" class="m3-btn primary" type="button">
          Exportar PDF
        </button>
      </div>
    </section>
  </div>

  <!-- Lógica de la página -->
  <script type="module" src="js/visualizacion_feedback.js"></script>
</body>
</html>

